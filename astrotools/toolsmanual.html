<!doctype html public "-//w3c//dtd html 4.0 transitional//en">

<html>
<head>
	<title>Notes to Javascript Ephemeris Tool</title>
	<meta name="Author" content="Ole Nielsen">
	<meta name="Description" content="Javascript Ephemeris Tool usage and copyright notice">
	<meta name="KeyWords" content="amateur astronomy, astronomical calculation, javascript, moon, planet visibility">
	<base target=_self>
	<link rel=stylesheet type="text/css" href="calc.css">
	<style type="text/css">
		.tool {font-weight:bold}
	</style>
</head>

<body bgcolor="#ffffff" text="#000000" link="#0000ff" vlink="#0080ff" alink="#ff00ff">

<p align=center><A HREF="javascript:window.close()">close window</A></p>

<h1>Javascript Ephemeris Tool Manual</h1>

<p align=center><a href="#usage">Usage</a> - <a href="#browser">Browser notes</a> -
<a href="#source">Source</a> - <a href="#copyright">Copyright notice</a> - 
<a href="history.html">History</a> - <a href="glossary.html">Glossary of astronomical terms</a></p>

<hr>

<p>Ephemeris Tool is a collection of javascript tools for calculating ephemerides 
etc of solar system objects and presenting the results as charts or lists. Ephemeris Tool can be
used for calculating ephemerides of solar system objects,
e.g. rise and set times of Sun, Moon, planets and much more.
<p>This script, which has now become a part of the AstroTools suite, is a further development of Javascript Skyplanner. <br>
Ephemeris Tool (and Skyplanner) was inspired by 
<a href="http://www.peter-hayes.freeserve.co.uk/ephemeris/" target=_top>Javascript Ephemeris</a> 
written by Peter Hayes. Although most code is new or rewritten some code here and there can be attributed to Peter's original code. 
Please see the copyright notices further below.</p>
<p>The application is written entirely in javascript and executed by the Javascript interpreter 
of standard web browsers. Thus all calculations take place on your own machine. 
There is no server interaction and you can actually download Ephemeris Tool and run it offline on 
your computer, see below.</p>

<HR>

<h3><a name="usage">Usage</a></h3>

<p>Ephemeris Tool can be used to display astronomical data either as charts or as traditional ephemerides etc. 
Most tools are available in both a graphical mode and a text mode format but there are some differences 
in the information provided.</p>

<p>Brief instructions: <br>
To use Ephemeris Tool set your location and time zone, specify start date and time, time span and step, 
then select the desired object, select graphical or text mode output and finally click the desired tool. 
The yellow fields are required inputs. For more details, read on.</p>
<p><b>Important</b><br>
The calculations can be slow depending on the speed of your computer, the browser used and 
the requested output. Don't panic if it looks like your browser hangs. It is just thinking! 
New versions of Mozilla (and Firefox) may occasionally show an alert box  
warning that "A script is causing mozilla to run slow" and offering you to abort it. 
Just click "Cancel" to continue running the script.</p>

<h4>Location and time zone</h4>
<p>Enter the name and latitude/longitude of your location here. 
Alternatively you can select one of the locations from the drop down list. 
It may be a good idea to first select a town near your place from the list to get 
the time zone correct and then manually edit the name and latitude/longitude as needed. 
For the latitude and longitude enter UNSIGNED values on the form DD or DD:MM 
(DD:MM:SS is also allowed). Remember to check the correct North/South and East/West radio buttons. 
Enter time zone as +/-H:MM. The time zone is positive east of Greenwich and negative 
if west of Greenwich (e.g. in the United States). You can easily switch between 
daylight saving time (DST) and standard time by checking/unchecking the DST box. <br>
NB: If you select one of the places from the selection list the time zone for that location 
will be used including correction for DST if applicable (the algorithm for determining DST 
is not fool proof so please check if the time zone is correct).</p>

<p>You can save your home location to a <b>cookie</b> such that Ephemeris Tool will automatically 
use your place the next time you visit Ephemeris Tool. The cookie will also remember the time zone 
and if daylight saving time is in force. Press 'Store' to save the current location. 
'Recall' will load the location data from the cookie and 'Delete cookie' will do exactly that. 
Obviously, your browser must allow cookies to be set for this function to work.</p>

<h4>Date and time</h4>
<p>Enter the desired start date and time. Use the format YYYY:MM:DD for date and HH:MM for time. 
Use the '+' and '-' buttons for quickly changing the date and time. 
The function of the 'Now', 'Midnight' and 'Noon' buttons should be obvious. 
The 'Now' button depends on the system clock so make sure that the system clock and time zone 
of your computer are correctly set. The 'Julian day' field shows the current date and time 
in julian day format, a format preferred for astronomical calculations. 
Ephemeris Tool uses julian days as its internal time representation. 
You may also enter a julian day, handy if you need to convert a julian day number 
into normal date and time format. The 'Sidereal time' field is 'read-only'. See glossary
for explanation of sidereal time.</p>

<h4>Select time span and step</h4>
<p>Specify the desired time span (default 7 days) and the time step (default 1 day) for 
ephemerides etc. Some tools ignore these settings (Alt-Az and Separation) or only use the 
time span selection (Event searches). Daily Events and Twilight Altitude ignore time steps of less than
one day.</p>

<h4>Select object(s)</h4>
<p>Select the desired object from the drop down list. In addition to the standard solar system
objects you may also specify a User Object having fixed coordinates such as a star or deep sky object. 
Enter the RA/Dec coordinates and eventually a name of your choice. 
Alternatively you can select either a star or a deep sky object from the built-in catalogues. 
The data from the selected object will be copied into the user object fields. 
Only some tools support the User Object.<br>
<b>Comets:</b> Select a comet from the comet drop menu. I will try to keep the list updated with currently 
interesting comets (those getting brighter than magn. 10 or so). 
If you download Ephemeris Tool to your own computer you may add comets of your own choice. 
You will need to add the orbital elements to the comet.js file, see the instructions in that file. 
One warning: Don't work with a comet at dates more than 1-2 years from the date of perihelion. 
The formulae used are not accurate far from perihelion. Also note that elements for periodic comets are
only valid for one particular perihelion passage.<br>
<b>All Planets</b> (incl. Sun and Moon):  Supported by most chart mode tools but of the text mode tools 
only 'Daily Events', 'Data' 
and 'Positions' support it and only for a single time instant</p>

<h4>Tools</h4>
<p>Select the desired output mode (chart or text) using the radio buttons.
Then click the desired tool. See the <a href="glossary.html" target=_blank>glossary</a> 
if you need explanations for the terms used</p>

<p class="tool">Daily events (Visibility)</p>
<p><b>Chart:</b> Displays a coloured bar for each day, the colours indicating the times of daylight, twilights and darkness.
Yellow and green colours shows the visibility of the chosen object. The bars always start at 12:00 (noon) irrespective
of the time setting. If the object is the Moon the illumination is shown to the right.<br>
<b>Text:</b> Shows rise, transit and set times for the chosen object. 
If 'Sunrises/sets' checked all twilight and sunrise/set times will be shown as well.</p>

<p class="tool">Object Data</p>
<p>(Chart/Text) Shows distance to Sun (text only) and Earth, diameter, illumination and brightness 
for the chosen object. </p>

<p class="tool">Object Position</p>
<p>(Chart/Text) The charts are only able to show one parameter at a time, thus you must click the desired radio button 
(Declination (+ RA), Longitude (+ latitude) or Elongation). 
The text mode listing will show right ascension (RA), declination, altitude, azimuth, 
ecliptic longitude, latitude and elongation for chosen object. 
Positions are geocentric except for altitude and azimuth (topocentric).</p>

<p class="tool">Twilight Altitude</p>
<p>(Chart/Text) Shows the altitude and azimuth (text mode only) of the chosen object when the Sun is at the specified angle 
below the horizon. Also shows if the object is rising or setting. 
The elongation is shown in text mode.
This tools is particularly useful for showing the visibility of objects having a small elongation like
Mercury and Venus.</p>

<p class="tool">Alt-Azimuth</p>
<p>(Chart/Text) Shows topocentric altitude and azimuth for the chosen object. 
Further displays if it is day or night and if the Moon is up (text mode only). 
Select the time step (5 - 120 minutes) before clicking this tool. 
The table is always generated for a 24 hour period.<p>

<p class="tool">Separation</p>
<p>(Text only) Shows the apparent angular separation of two objects and the corresponding position angle (PA). <br>
Topocentric altitude and azimuth are displayed for the first object, then the separation 
and PA, then 'yes' if the two objects "touch" and finally if it is daylight, twilight or dark. 
This tool uses the time step selection of 'Alt-Az' and always generates a table for 24 hours. 
This function is useful for investigating close mutual conjunctions and also as a crude tool 
for detecting solar eclipses, lunar occultations etc. Due to the limited precision 
contact times may be some minutes off the correct values. Always confirm results with other sources if you want
to observe occultations and other "close" events.</p>

<!--
<p class="tool">Lunar/solar Events</p>
<p>Searches for events of the Moon and the Sun. Presents chronologically sorted list of events found.
Shown are lunar phases 
(New/Full Moon, First/Last Quarter), lunar apogee and perigee with distance and solar events 
(equinoxes, summer and winter solstices and peri/aphelion). If you choose a long time span 
(several years) for this tool you may be in for a LONG wait!</p>

<p class="tool">Planetary events</p>
<p>Searches for conjunctions and other events involving the planets. The following events are detected: 
Mutual conjunctions, conjunctions/oppositions for outer planets, 
inferior/superior conjunctions for inner planets and greatest elongations for inner planets. 
If 'Lunar events' is checked the search will include conjunctions with the Moon as well 
as all events detected by 'Lunar/solar Events'. Please note that the listed separations 
are for a geocentric observer. For close conjunctions involving the Moon use the 'Separation' tool 
to investigate the local circumstances</p>
-->

<p class="tool">Visible Stars/Deep sky objects</p>
<p>This tool is useful for finding observable objects at a given time. <br>
Text mode: Shows all stars or deep sky objects visible at the selected time (text mode). <br>
Chart mode: Show visibility through the day of all objects reaching the altitude limit (see below) 
at the observer's latitude are shown.<br>
Controls: Use <b>Minimum altitude</b> to exclude objects lower than this altitude. 
If you check <b>Sort in R.A</b> the list of objects will be sorted in right ascension order 
starting with objects setting 
in the western sky and ending with objects rising in the eastern sky. Objects near transit 
(the optimal time for observation) can be found in the middle of the list. 
In chart mode the display will start with objects transiting just after noon. Look for objects
having a transit near the desired observing time.</p>

<hr>
<h4>Precision</h4>
<p>The program aims to present a quick overview of the desired data, not to provide 
high precision numbers. It trades precision for speed and size. Don't expect better precision 
than about 1-2 arcminutes on positions. A better precision than this would require 
other theories using large tables and correspondingly slow execution.</p>
<p>Ephemeris Tool uses the following theories for calculating planetary and lunar positions: 
Planetary calculations are based on the formulae in 
<a href="http://www.stjarnhimlen.se/english.html">Paul Schlyter's</a> article 
<a href="http://www.stjarnhimlen.se/comp/ppcomp.html">"Computing planetary positions"</a>. 
He claims a precision of about 2 arcminutes on positions. 
Lunar calculations use a truncated version of the method presented in "Astronomical Algorithms", 
2nd edition by Jean Meeus. Lunar positions should be good to about 1 arcminute. 
"Astronomical Algorithms" is a strongly recommended book for anybody interested in performing astronomical
calculations. It has helped me with various formulae for translating between 
coordinate systems, calculating rise and set times and much more. 
Please note that the theories only provide the specified precision between 1000 AD and 3000 AD or so. 
Outside this time interval errors will grow quickly.</p>
 
<h4>Where is Pluto? </h4>
<p>I have not included Pluto for various reasons: First of all Pluto requires a different theory 
than the other planets meaning extra code. Secondly Pluto only moves very slowly over the sky 
(it will stay in Serpens/Sagittarius for the next many years to come). 
It is also extremely faint and you will anyway need a detailed planetarium programme to locate it 
(and a big telescope to see it!). And finally: Is Pluto a planet?</p>

<hr>
<h3><a name="browser">Browser notes</a></h3>

<p>Ephemeris Tool is demanding on the javascript interpreter of the browser and requires CSS2 support. 
Older browsers may crash or report errors. Most recent browsers should be able to run Ephemeris Tool. 
Recommended browsers are Mozilla 1.7, Firefox and Internet Explorer 6 or better. 
The script has been tested on various computers 
with the following browsers running under Windows 98 SE, ME, 2000 and XP:<br>
<b>Mozilla 1.7.3</b>, <b>Firefox 1.0</b> and <b>Internet Explorer 6</b></p>

<p>Speed: The speed of Ephemeris Tool depends on the function and number of output lines. 
Most tools with reasonable combinations of time span and time step will finish within a couple 
of seconds on average hardware.</p>

<hr>

<h3><a name="copyright">Copyright Notice</a></h3>

<p>Astrotools and all its subcomponents like Ephemeris Tool have been released under the GNU 
General Public Licence (GNU GPL).</p>

<pre>
    Copyright (C) 2002-2005  Ole Nielsen

    This program is free software; you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation; either version 2 of the License, or
    (at your option) any later version.

    This program is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with this program; if not, write to the Free Software
    Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
</pre>

<p>Please see <a href="gpl.txt">gpl.txt</a> for the full text of the GNU GPL.</p>

<p>Please also visit the 
<a href="http://www.peter-hayes.freeserve.co.uk/ephemeris/" target=_top>Javascript Ephemeris</a> 
web site of Peter Hayes. His site and javascript code has been the original inspiration for my application. Although the
majority of my code is new or completely rewritten,  
some code fragments can still be traced back to his original code. Any code provided by Peter Hayes 
is copyright &copy; Peter Hayes 1999-2001.</p>

<hr>

<h3><a name="source">Source</a></h3>

<p>You can run Astrotools off-line from your own hard disk. 
Download <a href="astrotools.zip">astrotools.zip</a> to your computer and unzip the archive 
to a folder of your choice. Open "astrotools2.html" in your browser 
to start AstroTools (In Windows Explorer you can also double click the file to open it 
in your default browser). Don't forget to bookmark this file in your browser for later use.</p>

<p>You may redistribute Astrotools under the terms of the GNU GPL (see above).
You must include all files including the text of the GNU GPL (gpl.txt).</P>

<hr>

<SCRIPT LANGUAGE="JavaScript">
<!-- Begin

domain = "planet.nl";
user = "astronomi";

document.write('<p>Contact <a href=\"mailto:' + user + '@' + domain + '\">');
document.write('Ole Nielsen' + '</a></p>');
// End -->
</SCRIPT>

<p>Home page: <a href="http://www.ngc7000.org/" target=_top>Ole's Astronomy Site</a></p>

<p>If you came here via a search engine: <a href="astrotools.html" target=_top>AstroTools</a></p>

</body>

</html>
